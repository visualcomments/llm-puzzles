# llm-puzzles-starter

–ú–∏–Ω–∏-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –ø–æ –ø—É–Ω–∫—Ç–∞–º:
1) –ü—Ä–æ—Å—Ç—ã–µ –∑–∞–¥–∞—á–∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–æ–∫ —Å –Ω–∞–±–æ—Ä–æ–º –º—É–≤–æ–≤ ¬´–∫–∞–∫ bubble + –æ–¥–∏–Ω —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π¬ª.  
2) ¬´–°–ª–∞–±—ã–π, –Ω–æ —á–∞—Å—Ç—ã–π¬ª —Å–∏–≥–Ω–∞–ª –∫–∞—á–µ—Å—Ç–≤–∞: Success@N, ŒîKendallTau, ŒîInversions.  
3) –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è human-in-the-loop ‚Äî –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å —Ö–∏–Ω—Ç—ã –∏ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤.

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
python -m venv .venv && source .venv/bin/activate
pip install -r requirements.txt

# –∑–∞–ø—É—Å—Ç–∏—Ç—å baseline –∏ –ø—Ä–∏–º–µ—Ä –∫–∞–Ω–¥–∏–¥–∞—Ç–∞ –Ω–∞ –∑–∞–¥–∞—á–µ cyclic-coxeter (n=16, r=3)
python run.py --task cyclic-coxeter-n16-r3 --splits fast --candidates baseline heuristic1
```

–í—ã–≤–æ–¥ –ø–æ–∫–∞–∂–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –Ω–∞ —Å–ø–ª–∏—Ç–µ `fast`. –î–ª—è `control` –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--splits control` –∏–ª–∏ –æ–±–∞ —á–µ—Ä–µ–∑ `--splits fast control`.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞
```
src/
  tasks.py          ‚Äî Task, Moveset, —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –º—É–≤–æ–≤
  movesets.py       ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –º—É–≤–æ–≤: bubble (adjacent swap), cyclic_coxeter(r)
  baselines.py      ‚Äî bubble-sort baseline (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ adjacent swap)
  metrics.py        ‚Äî Success@N, Kendall tau, invers–∏–∏
  generators.py     ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ø–ª–∏—Ç–æ–≤: —Å–ª—É—á–∞–π–Ω—ã–µ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∏
  evaluator.py      ‚Äî –ø—Ä–æ–≥–æ–Ω –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤, –ø–æ–¥—Å—á—ë—Ç –º–µ—Ç—Ä–∏–∫, –æ—Ç—á—ë—Ç
  registry.py       ‚Äî —Ä–µ–µ—Å—Ç—Ä –∑–∞–¥–∞—á –∏ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤
examples/candidates/
  heuristic1.py     ‚Äî –ø—Ä–∏–º–µ—Ä —ç–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–∞
datasets/
  (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ —Å–ø–ª–∏—Ç—ã –±—É–¥—É—Ç –∫–ª–∞—Å—Ç—å—Å—è —Å—é–¥–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ)
tests/
  test_metrics.py
run.py              ‚Äî CLI –¥–ª—è –ø—Ä–æ–≥–æ–Ω–æ–≤
requirements.txt
```

## –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–∞–Ω–¥–∏–¥–∞—Ç–∞
–ö–∞–Ω–¥–∏–¥–∞—Ç ‚Äî —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è `solve(p, moveset, budget)`,
–∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **—Å–ø–∏—Å–æ–∫ –º—É–≤–æ–≤** (–∫–∞–∂–¥—ã–π ‚Äî tuple, —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å moveset),
–∫–æ—Ç–æ—Ä—ã–µ —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫ –∫–æ–ø–∏–∏ –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∏ `p` (0..n-1) –∏ –Ω–µ –ø—Ä–µ–≤—ã—à–∞—é—Ç `budget` –ø–æ –¥–ª–∏–Ω–µ.
–ü—Ä–∏–º–µ—Ä —Å–º. –≤ `examples/candidates/heuristic1.py`.

> –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø–∏—Å–∞—Ç—å ¬´–∞–ª–≥–æ—Ä–∏—Ç–º, –∫–æ—Ç–æ—Ä—ã–π —Å–∞–º –ø—Ä–∏–º–µ–Ω—è–µ—Ç –º—É–≤—ã¬ª, –≤–µ—Ä–Ω–∏—Ç–µ –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –∏ –∏–∑–º–µ–Ω—è–π—Ç–µ –∫–æ–ø–∏—é `p` —á–µ—Ä–µ–∑ `moveset.apply_inplace(...)` ‚Äî –Ω–æ **—Å—Ç—Ä–æ–≥–æ** –Ω–µ –±–æ–ª–µ–µ `budget` —à–∞–≥–æ–≤. Evaluator –ø—Ä–æ–≤–µ—Ä–∏—Ç –∏—Ç–æ–≥.

## –î–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π –∫–∞–Ω–¥–∏–¥–∞—Ç
1) –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –≤ `examples/candidates/my_algo.py` —Å —Ñ—É–Ω–∫—Ü–∏–µ–π `solve(p, moveset, budget)`.
2) –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –µ–≥–æ –≤ `src/registry.py` (—Å–º. `register_candidate("my_algo", ...)`).
3) –ó–∞–ø—É—Å–∫–∞–π—Ç–µ: `python run.py --candidates my_algo`.

## –ü–æ—á–µ–º—É —Ç–∞–∫
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, —á–∏—Å—Ç—ã–π Python.
- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –∏ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏.
- –õ–µ–≥–∫–æ –≤—Å—Ç–∞–≤–∏—Ç—å LLM-–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –ø–æ–≤–µ—Ä—Ö: –≥–µ–Ω–µ—Ä–∏—Ç—å —Ñ–∞–π–ª-–∫–∞–Ω–¥–∏–¥–∞—Ç –∏ –ø—Ä–æ–≥–æ–Ω—è—Ç—å —á–µ—Ä–µ–∑ `evaluator`.


## Kaggle: Santa 2023 —Å–∞–±–º–∏—à–Ω —á–µ—Ä–µ–∑ API

–≠—Ç–æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —É–º–µ–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å —Ñ–∞–π–ª —Å–∞–±–º–∏—à–Ω–∞ `id,moves` –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –µ–≥–æ –≤ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–µ **Santa 2023**.

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è Kaggle API
```bash
pip install -r requirements.txt

# –õ–Æ–ë–û–ô –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:
# A) –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–¥–æ –∑–∞–ø—É—Å–∫–∞ Python):
export KAGGLE_USERNAME=your_username
export KAGGLE_KEY=your_key

# B) –§–∞–π–ª ~/.kaggle/kaggle.json —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:
# {"username":"your_username","key":"your_key"}
# –∏ –ø—Ä–∞–≤–∞–º–∏ 0600
```

### –°–±–æ—Ä–∫–∞ —Å–∞–±–º–∏—à–Ω–∞
–°–∫–∞—á–∞–π—Ç–µ `puzzles.csv` –∏–∑ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è –∏ –ø–æ–ª–æ–∂–∏—Ç–µ –∫—É–¥–∞ —É–¥–æ–±–Ω–æ. –ó–∞—Ç–µ–º:
```bash
python run_santa.py --puzzles /path/to/puzzles.csv --out submission.csv
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏–º–µ—Ä-¬´—Å–æ–ª–≤–µ—Ä¬ª, –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É —Ö–æ–¥–æ–≤ (—Ä–µ—à–∏—Ç —Ç–æ–ª—å–∫–æ —É–∂–µ —Ä–µ—à—ë–Ω–Ω—ã–µ –ø–∞–∑–ª—ã). 
–ó–∞–º–µ–Ω–∏—Ç–µ –µ–≥–æ –Ω–∞ —Å–≤–æ–π: —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ —Ñ—É–Ω–∫—Ü–∏—é `solve_row(row)->str` –∏ –ø–µ—Ä–µ–¥–∞–π—Ç–µ –º–æ–¥—É–ª—å:
```bash
python run_santa.py --puzzles puzzles.csv --out submission.csv \
  --solver examples.santa_solver.example_solver:solve_row
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ Kaggle
```bash
python run_santa.py --puzzles puzzles.csv --out submission.csv \
  --submit --message "my first API submit" --competition santa-2023
```

> –¢—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø–∞–∫–µ—Ç `kaggle` –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è. API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ –∂–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, —á—Ç–æ –∏ CLI `kaggle competitions submit`.


## –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–∞–±–º–∏—à–Ω –¥–ª—è CayleyPy-—Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Å–ª–∞–≥–∏ (–º–æ–∂–µ—Ç–µ —Ä–∞—Å—à–∏—Ä—è—Ç—å `src/comp_registry.py`):
- `cayley-py-professor-tetraminx-solve-optimally`
- `cayleypy-christophers-jewel`
- `cayleypy-glushkov`
- `cayleypy-rapapport-m2`
- `cayley-py-megaminx`
- `CayleyPy-pancake`
- `cayleypy-reversals`
- `cayley-py-444-cube`
- `cayleypy-transposons`
- `cayleypy-ihes-cube`

### –§–æ—Ä–º–∞—Ç
–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∫–æ–Ω–∫—É—Ä—Å–æ–≤ —ç—Ç–æ–π —Å–µ—Ä–∏–∏ –ø—Ä–∏–Ω–∏–º–∞—é—Ç CSV `id,moves`. –í `src/comp_registry.py` –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–ª–∏—á–∏—è (–∏–º–µ–Ω–∞ –∫–æ–ª–æ–Ω–æ–∫, —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å —Ç–æ–∫–µ–Ω–æ–≤ –∏ —Ç.–ø.).

### –°–±–æ—Ä–∫–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞
```bash
# —Å–æ–±—Ä–∞—Ç—å —Å–∞–±–º–∏—à–Ω
python run_comp.py --competition cayley-py-444-cube --puzzles /path/to/puzzles.csv \
  --out submission.csv --solver examples.cayleypy_solver.baseline:solve_row

# —Å—Ä–∞–∑—É –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å
python run_comp.py --competition cayley-py-444-cube --puzzles puzzles.csv \
  --out submission.csv --solver examples.cayleypy_solver.baseline:solve_row \
  --submit --message "first attempt"
```
–í–∞—à —Å–æ–ª–≤–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç `(row, cfg)` –∏ –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å:
- —Å—Ç—Ä–æ–∫—É `moves`,
- —Å–ø–∏—Å–æ–∫ —Ç–æ–∫–µ–Ω–æ–≤ (–º—ã —Å–æ–µ–¥–∏–Ω–∏–º —á–µ—Ä–µ–∑ `cfg.move_joiner`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `"."`),
- —Å–ª–æ–≤–∞—Ä—å —Å –∫–ª—é—á–æ–º `cfg.moves_key` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `"moves"`).

–ï—Å–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç –¥—Ä—É–≥–æ–π –∑–∞–≥–æ–ª–æ–≤–æ–∫/–ø–æ–ª—è ‚Äî –ø–æ–ø—Ä–∞–≤—å—Ç–µ –∑–∞–ø–∏—Å—å –≤ `REGISTRY` –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é.


## üöÄ –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ —Å–∞–±–º–∏—Ç–∞ (—Ñ–æ—Ä–º–∞—Ç—ã `id,moves` –∏ `initial_state_id,path`).
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å legacy-–ø—Ä–æ—Ñ–∏–ª—è–º–∏ (`id_col/move_col/joiner`).
- –í—ã–∑–æ–≤ LLM —á–µ—Ä–µ–∑ g4f (–±–µ–∑ –∫–ª—é—á–∞), –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.
- –ë–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π —á–µ—Ä–µ–∑ `G4F_MODELS`, –±—ã—Å—Ç—Ä–∞—è —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥–µ–ª–µ–π (`G4F_SELFCHECK`).
- –§–ª–∞–≥–∏ `--prefer-sample` –∏ `--strict-llm` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è fallback'–∞–º–∏.

–°–º. —Ç–∞–∫–∂–µ **README_LLM.md** –∏ **TROUBLESHOOTING.md**.
